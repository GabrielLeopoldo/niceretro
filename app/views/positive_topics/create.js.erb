<% if @positive_topic.errors.any? %>
  if (!$('#positive_topic_description').next().hasClass('ls-help-message')) {
    $('#new_positive_topic').find('label').append('<%= errors_for(@positive_topic, :description) %>').addClass('ls-error');
  }
<% else %>
  // Add the positive topic line to table
  $('#positive-topics-table').find('tbody').append(
    '<tr data-id="<%= @positive_topic.id %>">' +
      '<td><%= @positive_topic.description %></td>' +
      '<td>' +
        '<%= link_to "", [@retrospective, @positive_topic], class: "ls-btn ls-ico-pencil" %>' +
        '<%= link_to "", [@retrospective, @positive_topic], class: "ls-btn-danger ls-ico-close", method: :delete, remote: true %>' +
      '</td>' +
    '</tr>'
  );

  $('#positive_topic_description').next().remove();
  $('#new_positive_topic').find('label').removeClass('ls-error');
  $('#positive_topic_description').val('');
<% end %>
